@model IEnumerable<TimerApp.Models.User>
@{
    ViewData["Title"] = "Administration";
    Layout = "_Layout";
}

<div class="d-flex justify-content-between align-items-center mb-4">
    <h2 class="fw-bold mb-0">
        <i class="bi bi-people-fill text-danger me-2"></i>Administration
    </h2>
    <a class="btn btn-sm btn-outline-secondary" asp-controller="Home" asp-action="Index">
        <i class="bi bi-house-door me-1"></i>Tilbage til forsiden
    </a>
</div>

<div class="mb-3">
    <a class="btn btn-success" asp-action="CreateUser">
        <i class="bi bi-person-plus me-1"></i>Tilf√∏j medarbejder
    </a>
    <a class="btn btn-outline-secondary" asp-action="ExportCsv" asp-route-year="@DateTime.Now.Year" asp-route-month="@DateTime.Now.Month">
        <i class="bi bi-download me-1"></i>Download CSV (@DateTime.Now.ToString("MMMM yyyy"))
    </a>
</div>

<div class="card shadow-sm rounded-4 p-3">
    <table class="table table-hover align-middle mb-0">
        <thead class="table-light">
            <tr>
                <th>Navn</th>
                <th>E-mail</th>
                <th class="text-center">Timer i alt</th>
                <th></th>
            </tr>
        </thead>
        <tbody>
            @foreach (var u in Model)
            {
                <tr>
                    <td class="fw-500">@u.Name</td>
                    <td><a href="mailto:@u.Email" class="text-decoration-none">@u.Email</a></td>
                    <td class="text-center">
                        <span class="badge bg-danger rounded-pill">@(u.TimeEntries?.Sum(t => t.Hours) ?? 0)</span>
                    </td>
                    <td class="text-end">
                        <form asp-action="DeleteUser" asp-route-id="@u.Id" method="post" class="d-inline" onsubmit="return confirm('Slet medarbejder OG alle dennes timer?');">
                            <button type="submit" class="btn btn-sm btn-outline-danger">
                                <i class="bi bi-trash"></i>
                            </button>
                        </form>
                    </td>
                </tr>
            }
        </tbody>
    </table>
</div>